<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>Résultats de la Campagne</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .section { margin-bottom: 20px; }
        .section-header { cursor: pointer; font-size: 1.2em; }
        .section-content { display: none; margin-left: 20px; }
        .section-content.show { display: block; }
        .copy-button { margin-left: 10px; cursor: pointer; }
        pre { white-space: pre-wrap; word-wrap: break-word; }
    </style>
</head>
<body>
    <h1>Band Stream Logo</h1>
    <h2>Résultats de la Campagne</h2>
    <p>Campagne générée pour {{ artist }} - {{ song }} ({{ style }})</p>

    <div class="section">
        <div class="section-header">▼ Analyse</div>
        <div class="section-content show">
            <p><strong>Artiste :</strong> {{ artist }}</p>
            <p><strong>Chanson :</strong> {{ song }}</p>
            <p><strong>Style :</strong> {{ style }}</p>
            <p><strong>Tendances :</strong> {{ analysis.trends | join(", ") }}</p>
            <p><strong>Artistes similaires :</strong> {{ analysis.lookalike_artists | join(", ") }}</p>
            <p><strong>Image de l'artiste :</strong></p>
            <img src="{{ analysis.artist_image_url }}" alt="Image de l'artiste">
        </div>
    </div>

    <div class="section">
        <div class="section-header">▼ Titres Courts</div>
        <div class="section-content">
            {% for title in short_titles %}
                <p>{{ title }} ({{ title | length }} / 30) <button class="copy-button" onclick="copyToClipboard('{{ title }}')">Copier</button></p>
            {% endfor %}
        </div>
    </div>

    <div class="section">
        <div class="section-header">▼ Titres Longs</div>
        <div class="section-content">
            {% for title in long_titles %}
                <p>{{ title }} ({{ title | length }} / 55) <button class="copy-button" onclick="copyToClipboard('{{ title }}')">Copier</button></p>
            {% endfor %}
        </div>
    </div>

    <div class="section">
        <div class="section-header">▼ Descriptions Longues</div>
        <div class="section-content">
            {% for desc in long_descriptions %}
                <p>{{ desc.description }} ({{ desc.character_count }} / 80) <button class="copy-button" onclick="copyToClipboard('{{ desc.description }}')">Copier</button></p>
            {% endfor %}
        </div>
    </div>

    <div class="section">
        <div class="section-header">▼ Description YouTube</div>
        <div class="section-content">
            <p><strong>Courte :</strong> {{ youtube_description_short.description }} ({{ youtube_description_short.character_count }} / 120) <button class="copy-button" onclick="copyToClipboard('{{ youtube_description_short.description }}')">Copier</button></p>
            <p><strong>Complète :</strong></p>
            <pre>{{ youtube_description_full.description }} ({{ youtube_description_full.character_count }} / 5000)</pre>
            <button class="copy-button" onclick="copyToClipboard('{{ youtube_description_full.description }}')">Copier</button>
        </div>
    </div>

    <a href="/">Retour à l'accueil</a>

    <script>
        document.querySelectorAll('.section-header').forEach(header => {
            header.addEventListener('click', () => {
                const content = header.nextElementSibling;
                content.classList.toggle('show');
                header.textContent = content.classList.contains('show') ? '▼ ' + header.textContent.slice(2) : '▶ ' + header.textContent.slice(2);
            });
        });

        function copyToClipboard(text) {
            navigator.clipboard.writeText(text).then(() => {
                alert('Texte copié dans le presse-papiers !');
            });
        }
    </script>
</body>
</html>
